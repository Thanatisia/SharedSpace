# Grub - Configurations and Customization

## Information
### Folders
+ /etc/default : Contains System defaults
	- the /etc/default handles default configurations including the tty
		- Your bootloader handles the initial boot-up launch/setup process such as (and including)
			+ TTY Resolution
			+ Starting up operating systems registered by the Boot manager
+ /boot/grub : Grub boot configurations and resources such as fonts, themes, aritecture and config file

### Files
+ System Default Grub Configuration File (Manual Editable) : /etc/default/grub
+ Grub system-generated configuration file (Autogenerated) : /boot/grub/grub.cfg

## Visual Configuration

### Change the look of the menu
```
You can edit the TTY resolution and other variables by
editing the '/etc/defult/grub' file

- the '/etc/default/grub' handles the GRUB Bootloading functionality during the system bootup/startup process
```
- Set the framebuffer (tty) resolution
	+ GRUB can set the framebuffer for both GRUB itself (GFXMODE) and the Kernel (GFXPAYLOAD)
	- Methods
		- Setting GRUB_GFXMODE and GRUB_GFXPAYLOAD_LINUX
			+ The preferred method is by editing '/etc/default/grub'
			- set GRUB_GFXMODE with the 'width (pixels) x height (pixels) x color depth (bits {8|16|24|32})
				+ as well as a fallback resolution with other options
				```console
				# sudo $EDITOR /etc/default/grub
				GRUB_GFXMODE=widthxheightxcolor_bits,1024x768,auto
				```
			+ (OPTIONAL) set GRUB_GFXPAYLOAD_LINUX with the option of what the kernel should do
				```console
				# sudo $EDITOR /etc/default/grub
				GRUB_GFXPAYLOAD_LINUX=keep
				```
			+ Regenerate grub.cfg after making changes
				```console
				sudo grub-mkconfig -o /boot/grub/grub.cfg
				```
			+ Reboot system
				```console
				sudo reboot now
				```

- Changing Background image and bitmap fonts
	```
	GRUB comes with support for background images and bitmap fonts in .pf2 format
	- The unicode font is included in the 'grub' package
		+ Under the filename 'unicode.pf2'
		- or only ASCII characters
			+ Under the filename 'ascii.pf2'
 		+ Get the filepaths
			pacman -Ql grub | grep pf2
	```
	- Image format supports
		+ tga
		+ png
		+ jpeg
	- Maximum supported resolution : Depends on Hardware
	- Pre-Requisites
		+ Set up proper framebuffer resolution
	- Setup
		- Edit '/etc/default/grub'
			```console
			# sudo $EDITOR /etc/default/grub
			GRUB_BACKGROUND="/path/to/grub/image"
			GRUB_FONT="/path/to/font.pf2"
			```
		- Regenerate grub.cfg after making changes
			```console
			sudo grub-mkconfig -o /boot/grub/grub.cfg
			```
			- If is successful
				+ User will see "Found background image..." in the terminal after the command is executed
			- If the image is not displayed
				- Check
					+ The path and the filename in /etc/default/grub are correct
					+ The image is of the proper size and format (tga, png, 8-bit jpg)
					+ The image was saved in the RGB mode, and is not indexed
					+ The console mode is not enabled in /etc/default/grub
					+ The command grub-mkconfig must be executed to place the background image information into the /boot/grub/grub.cfg file
					+ The grub-mkconfig scripts will not quote the file name in grub.cfg so make sure it does not contain spaces
		- Reboot system
			```console
			sudo reboot now
			```

- Changing Theme
	- Information
		+ When using a theme: Your splash image will usually not be displayed
	- Setup
		- Edit '/etc/default/grub'
			+ grub user share themes folder : "/usr/share/grub/themes/[theme-name]/theme.txt"
			```console
			# sudo $EDITOR /etc/default/grub
			GRUB_THEME="/path/to/gfxtheme"
			```
		- Regenerate grub.cfg after making changes
			```console
			sudo grub-mkconfig -o /boot/grub/grub.cfg
			```
			- If is successful
				+ User will see "Found theme: [path/to/theme/theme.txt]" in the terminal after the command is executed
		- Reboot system
			```console
			sudo reboot now
			```

- Changing Menu Colors
	- Information
		+ You can set the menu colors in GRUB
		+ The available colors for GRUB can be found in the [GRUB manual](https://www.gnu.org/software/grub/manual/html_node/Theme-file-format.html)
	- Setup
		- Edit '/etc/default/grub'
			```console
			# sudo $EDITOR /etc/default/grub
			GRUB_COLOR_NORMAL="main-color/general-color"
			GRUB_COLOR_HIGHLIGHT="main-color/general-color"
			```
		- Regenerate grub.cfg after making changes
			```console
			sudo grub-mkconfig -o /boot/grub/grub.cfg
			```
			- If is successful
				+ User will see "Found theme: [path/to/theme/theme.txt]" in the terminal after the command is executed
		- Reboot system
			```console
			sudo reboot now
			```

- Hiding/Showing Menu
	-Information
		- GRUB is able to hide/skip the menu by holding 'ESC' and 
			+ Show the menu by letting go of the 'ESC' button
		- You can also adjust whether you want to see the timeout counter
	- Setup
		- Edit '/etc/default/grub'
			```console
			# sudo $EDITOR /etc/default/grub
			GRUB_TIMEOUT=5
			GRUB_TIMEOUT_STYLE='countdown'
			```
		- Regenerate grub.cfg after making changes
			```console
			sudo grub-mkconfig -o /boot/grub/grub.cfg
			```
		- Reboot system
			```console
			sudo reboot now
			```

## Wiki

### Visual Configurations

#### TTY Resolution
+ GRUB_GFXMODE : Handles the framebuffer for GRUB
	- Syntax
		```
		GRUB_GFXMODE=[desired-resolution],[fallback-resolution (such as 1024x768)],[options,...]
		```
	- Options
		+ auto : Let the system Automatically handle and choose the best resolution (DEFAULT)
+ GRUB_GFXPAYLOAD_LINUX : Handles the framebuffer options for the Kernel;
	- Syntax
		```
		GRUB_GFXPAYLOAD_LINUX={options}
		```
	- Options
		+ keep : Makes sure that the kernel keeps the resolution (Default)

#### Background
+ GRUB_BACKGROUND : Set the background image of the GRUB Bootloader
	- Syntax
		```
		GRUB_BACKGROUND="/path/to/grub/image"
		```
	- Default: Generally the path is located/placed in '/boot/grub'
+ GRUB_THEME : Set the general theme of the GRUB Bootloader
	- Information
		+ Will override GRUB_BACKGROUND and GRUB_FONT
	- Components
		+ Background Image
		+ Color scheme
		+ Fonts
	- Syntax
		```
		GRUB_THEME="/path/to/gfxtheme"
		```
	- Default: Generally the path is located/placed in '/usr/share/grub/themes/[theme-name]/theme.txt'
+ GRUB_FONT : Set the font of the GRUB Bootloader menu
	- Syntax
		```
		GRUB_FONT="/path/to/font.pf2"
		```
	- Default: Generally the path is located/placed in '/boot/grub/fonts'

#### Menu Colors
+ GRUB_COLOR_NORMAL : The GRUB Menu colors normally when unselected/unhighlighted
	- Syntax
		```
		GRUB_COLOR_NORMAL="main-color/base-color"
		```
+ GRUB_COLOR_HIGHLIGHT : The GRUB Menu colors when selected/highlighted
	- Syntax
		```
		GRUB_COLOR_HIGHLIGHT="main-color/base-color"
		```

#### Hidden Menu
+ GRUB_TIMEOUT : Specify how many seconds to countdown before displaying the menu
	- Syntax
		```
		GRUB_TIMEOUT=n
		```
		- n = Number of seconds before displaying menu
+ GRUB_TIMEOUT_STYLE : What to do during the timeout countdown
	- Syntax
		```
		GRUB_TIMEOUT_STYLE="options"
		```
	- Options
		+ 'countdown' : Display the timeout timer to the user during the countdown (DEFAULT)

## Resources
+ [ArchWiki - GRUB - Setting the framebuffer resolution](https://wiki.archlinux.org/title/GRUB/Tips_and_tricks#Setting_the_framebuffer_resolution)
+ [GNU Documentations - GRUB - GFXMODE](https://www.gnu.org/software/grub/manual/grub/html_node/gfxmode.html)
+ [GNU Documentations - GRUB - Theme File Format](https://www.gnu.org/software/grub/manual/html_node/Theme-file-format.html)
